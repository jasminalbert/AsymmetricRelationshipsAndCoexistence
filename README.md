# Code repository for the paper ``Asymmetric relationships and their effects on coexistence''

Pimsupa Jasmin Albert, University of Kansas 
Daniel C. Reuman, University of Kansas  

## Introduction

This repository can be used to reproduce the complete analyses behind the paper ``Asymmetric relationships and their effects on coexistence" and to recompile the latex for the paper itself.

## How to run analyses and compile paper

To reproduce the analyses: 1) make your R working directory the `code` directory; 2) run `MASTER.R`. If all dependencies 
are in place (see next section) then all results supporting the paper will be saved to the results directories. This 
will take some time (a day or two, depending on your computer speed). 

To compile the paper latex, open `paper/Paper.Rnw` and `paper/SupMat.Rnw` and compile them using Sweave. If you are using
Rstudio and if it is configured to work with Sweave, this will just be a button in Rstudio entitled ``Compile PDF''.
All figures and other results generated by the code will be automatically imported into the paper.

## Dependencies

### Core dependencies

R, R studio configured to compile Sweave documents, latex and bibtex, and the `checkpoint` package in R. We used R 
version 3.6.3 running on Ubuntu Linux 16.04.7 and version 1.0.3 of `checkpoint`.

The codes uses the R `checkpoint` package. This is set up in the `MASTER.R` file. The `checkpoint` package then 
automatically scans through other files looking for other required R packages. It then downloads and installs the 
newest versions of those packages available on the given date. This helps ensure that re-compiling the document uses 
the same code that was originally used. This can take some time on first run (10 minutes or so) but it is faster on 
subsequent runs because the packages are already installed. This also means that R package dependencies should only 
be the `checkpoint` package, since that package should scan for other packages and install them locally. Restart
R after running to ensure make subsequent runs of other, unrelated codes rely on the packages you have installed
rather than the ones installed to run this repo.

Certain intensive bits of the code make use of the `mclapply` function in the `parallel` package to utilize mutliple 
compute cores. Seven cores are used. Search for `parallel::mclapply` in fig6_fxns.R where you can change this number
if you want to devote more or fewer cores. This approach to multicore processing only works on linux. If you are 
running Windows or Mac, it may work very slowly or not at all, no guarantees, good luck!

### Additional dependencies?

If you find additional dependencies were needed on your system, please let us know: reuman@ku.edu. We have endeavored 
to list all dependencies we can think of above, but we have only run this on our own machines, so we cannot guarantee 
that additional dependencies will not also be needed on other machines. This repository is intended to record a 
workflow, and is not designed or tested for distribution and wide use on multiple machines. It is not guaranteed to 
work without any (possibly substantial) hand-holding on arbitrary computing setups.

## Intermediate files:

Compiling the Sweave documents `paper/Paper.Rnw` and `paper/SupMat.Rnw` automatically produces a lot of ``intermediate'' 
files with extensions such as `.aux`, `.bbl`, `.log`, etc. Some of these can be useful for diagnosing problems, if any.
Delete these at your own risk.

## Acknowlegements

The authors thank Shyamolina Ghosh for suggesting the research problem, and Lawrence Sheppard, Max Castorani, Jon Walter, 
Jude Kastens, Vadim Karatayev, Emily Arsenault, Neil Thimmesch, Steve Ellner, and Robin Snyder for helpful discussions.
This material is based upon work supported by the National Science Foundation under Grant Numbers 17114195 and 
2023474. Any opinions, findings, and conclusions or recommendations expressed in this material are those of the author(s) 
and do not necessarily reflect the views of the National Science Foundation. The work was also supported by the 
James S McDonnell Foundation and the California Department of Fish and Wildlife, and the work does not represent
their opinions or finding or official viewpoints, either. 
